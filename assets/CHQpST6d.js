import{_ as v}from"./Ct-CEEEz.js";import{g as w}from"./BivMSyuE.js";import{e as y,r as x,i as k,j as h,k as E,u as L,c as r,a as i,t as l,h as u,F as g,g as m,b as j,w as I,o as c,d as B,_ as b}from"#entry";const D={class:"writing-page"},N={class:"hero-section"},F={class:"site-tagline"},M={class:"writing-section"},T={class:"year-title"},V={class:"posts-list"},$={class:"post-date"},C=y({__name:"writing",setup(P){const p=x([]);async function _(){try{const t=await fetch("/content/index.json");if(!t.ok){console.error("Failed to load content index");return}const a=await t.json(),n=[];for(const e of a.posts)try{const o=await fetch(`/content/${e.path}/index.json`);if(o.ok){const s=await o.json();n.push({id:s.id,title:s.title,slug:s.slug,date:s.date,isEncrypted:s.isEncrypted})}}catch(o){console.error(`Error loading post ${e.slug}:`,o)}p.value=n.sort((e,o)=>new Date(o.date).getTime()-new Date(e.date).getTime())}catch(t){console.error("Error loading posts:",t)}}async function d(){await _()}k(()=>{_(),document.addEventListener("visibilitychange",()=>{document.hidden||d()}),window.addEventListener("focus",d),h(()=>{refreshInterval&&clearInterval(refreshInterval)})}),h(()=>{document.removeEventListener("visibilitychange",d),window.removeEventListener("focus",d)});const f=E(()=>{const t={};return p.value.forEach(a=>{const n=a.date.split("-")[0];t[n]||(t[n]=[]),t[n].push(a)}),t});return L(w("Writing","截至目前，chili 已记录奇怪想法。")),(t,a)=>{const n=v;return c(),r("div",D,[i("div",N,[a[0]||(a[0]=i("h1",{class:"site-title"},"Writing",-1)),i("p",F,"截至目前，chili 已记录 "+l(u(p).length)+" 个奇怪想法。",1)]),i("section",M,[(c(!0),r(g,null,m(Object.keys(u(f)).sort((e,o)=>parseInt(o)-parseInt(e)),(e,o)=>(c(),r("div",{class:"year-section",key:e},[i("h2",T,l(e),1),i("ul",V,[(c(!0),r(g,null,m(u(f)[e],s=>(c(),r("li",{key:s.id,class:"post-item"},[i("span",$,l(s.date),1),j(n,{class:"post-link",to:`/post/${s.slug}`},{default:I(()=>[B(l(s.title),1)]),_:2},1032,["to"])]))),128))])]))),128))])])}}}),O=b(C,[["__scopeId","data-v-36c86154"]]);export{O as default};
